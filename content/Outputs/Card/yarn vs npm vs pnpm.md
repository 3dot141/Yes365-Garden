---
aliases: []
created_date: 2023-08-23 15:31
draft: false
summary: ''
tags:
- dev
---

![|525](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/55865fd68d6b46c38d4aa97181246f58~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

å‰æ®µæ—¶é—´æ¢äº†æ–°çš„å¼€å‘ç¯å¢ƒä¹‹åï¼Œä¸€ä¸ªä¸­å‹ç®¡ç†ç³»ç»Ÿé¡¹ç›®åœ¨å®‰è£… node module æ—¶ï¼Œæ¯ä¸ªäººæœ¬åœ° npm install å’Œ yarn æ—¶æ€»æ˜¯å‡ºå„ç§ä¸åŒé—®é¢˜ï¼Œç»å¸¸å®‰è£…ä¸æˆåŠŸæˆ–è€…æˆåŠŸä¹‹åæ— æ³•è¿è¡Œï¼Œæ’æŸ¥èµ·æ¥éå¸¸å›°éš¾ï¼Œåˆ é™¤é‡è£…çš„è€å¥—è·¯ä¹Ÿç»å¸¸å¤±è´¥ï¼Œè®©äººéå¸¸çƒ¦æ¼ï¼ï¼ï¼

æƒ³èµ·å‰æ®µæ—¶é—´ç»å¸¸å¬åˆ° pnpm çš„æ–°çš„åŒ…ç®¡ç†æ–¹å¼ï¼Œä»Šå¤©ç ”ç©¶äº†ä¸€ä¸‹å®ƒçš„æœºåˆ¶ï¼Œçœ‹æ˜¯å¦å¯ä»¥ç”¨å¾—èµ·æ¥ã€‚

ç°åœ¨æœ¬åœ°è¯•äº†ä¸€ä¸‹ï¼Œç›´æ¥å°±å®‰è£…æˆåŠŸäº†ï¼Œä¸”åŒ…å¤§å°æ¯” npm å®‰è£…çš„åŒ…è¦å°ä¸€äº›ï¼Œçœ‹äº†â€œç¥å…‰çš„ç¼–ç¨‹ç§˜ç±â€å…¬å·çš„æ–‡ç« ï¼Œç…§çŒ«ç”»è™ä¹Ÿè¡¥å……ä¸€ä¸‹å­¦ä¹ è¿‡ç¨‹ï¼›

npm å®‰è£…æœºåˆ¶ä¸ä»–çš„å‰ä¸–ä»Šç”Ÿ
---------------

æŒ‰ç…§åŒ…ç®¡ç†å·¥å…·çš„å‘å±•å†å²ï¼Œä» npm2 å¼€å§‹è®²èµ·ï¼š

### ä» npm2 å¼€å§‹

#### npm/yarn install åŸç†

æ‰§è¡Œ npm/yarn install ä¹‹åï¼ŒåŒ…å¦‚ä½•åˆ°è¾¾é¡¹ç›® node\_modules å½“ä¸­ã€‚å…¶æ¬¡ï¼Œnode\_modules å†…éƒ¨å¦‚ä½•ç®¡ç†ä¾èµ–ã€‚

æ‰§è¡Œå‘½ä»¤åï¼Œé¦–å…ˆä¼šæ„å»ºä¾èµ–æ ‘ï¼Œç„¶åé’ˆå¯¹æ¯ä¸ªèŠ‚ç‚¹ä¸‹çš„åŒ…ï¼Œä¼šç»å†ä¸‹é¢å››ä¸ªæ­¥éª¤:

Â  - 1. å°†ä¾èµ–åŒ…çš„ç‰ˆæœ¬åŒºé—´è§£æä¸ºæŸä¸ªå…·ä½“çš„ç‰ˆæœ¬å·  
\- 2. ä¸‹è½½å¯¹åº”ç‰ˆæœ¬ä¾èµ–çš„ tar åŒ…åˆ°æœ¬åœ°ç¦»çº¿é•œåƒ  
\- 3. å°†ä¾èµ–ä»ç¦»çº¿é•œåƒè§£å‹åˆ°æœ¬åœ°ç¼“å­˜  
\- 4. å°†ä¾èµ–ä»ç¼“å­˜æ‹·è´åˆ°å½“å‰ç›®å½•çš„ node\_modules ç›®å½•

ç„¶åï¼Œå¯¹åº”çš„åŒ…å°±ä¼šåˆ°è¾¾é¡¹ç›®çš„ node\_modules å½“ä¸­ã€‚

é‚£ä¹ˆï¼Œè¿™äº›ä¾èµ–åœ¨ node\_modules å†…éƒ¨æ˜¯ä»€ä¹ˆæ ·çš„ç›®å½•ç»“æ„å‘¢ï¼Œæ¢å¥è¯è¯´ï¼Œé¡¹ç›®çš„ä¾èµ–æ ‘æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ

åœ¨ npm1ã€npm2 ä¸­å‘ˆç°å‡ºçš„æ˜¯åµŒå¥—ç»“æ„ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ ·:

node\_modules

â””â”€Â foo

Â Â Â â”œâ”€Â index.js

Â Â Â â”œâ”€Â package.json

Â Â Â â””â”€Â node\_modules

Â Â Â Â Â Â â””â”€Â bar

Â Â Â Â Â Â Â Â Â â”œâ”€Â index.js

Â Â Â Â Â Â Â Â Â â””â”€Â package.json

é‚£ä¹ˆ A å’Œ B åŒæ—¶ä¾èµ– Cï¼ŒC è¿™ä¸ªåŒ…ä¼šè¢«å®‰è£…åœ¨å“ªé‡Œå‘¢ï¼ŸC çš„ç‰ˆæœ¬ç›¸åŒå’Œç‰ˆæœ¬ä¸åŒæ—¶å®‰è£…ä¼šæœ‰ä»€ä¹ˆå·®å¼‚å‘¢ï¼Ÿpackage.json ä¸­åŒ…çš„å‰åé¡ºåºå¯¹äºå®‰è£…æ—¶æœ‰ä»€ä¹ˆå½±å“å—ï¼Ÿä»Šå¤©å°±æ¥ä¸€èµ·ç ”ç©¶ä¸€ä¸‹ã€‚

#### A å’Œ B åŒæ—¶ä¾èµ– C

å‡å¦‚æœ‰ A å’Œ B ä¸¤ä¸ªåŒ…ï¼Œä¸¤ä¸ªåŒ…éƒ½ä¾èµ– C è¿™ä¸ªåŒ…ï¼Œnpm 2 ä¼šä¾æ¬¡é€’å½’å®‰è£… A å’Œ B ä¸¤ä¸ªåŒ…åŠå…¶å­ä¾èµ–åŒ…åˆ° node\_modules ä¸­ã€‚æ‰§è¡Œå®Œæ¯•åï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ° ./node\_modules è¿™å±‚ç›®å½•åªå«æœ‰è¿™ä¸¤ä¸ªå­ç›®å½•ï¼š

node\_modules/Â 

â”œâ”€â”¬ AÂ 

â”‚ â”œâ”€â”€ CÂ 

â”œâ”€â”¬ BÂ 

â”‚ â””â”€â”€ CÂ 

å¦‚æœä½¿ç”¨ npm 3 æ¥è¿›è¡Œå®‰è£…çš„è¯ï¼Œ./node\_modules ä¸‹çš„ç›®å½•å°†ä¼šåŒ…å«ä¸‰ä¸ªå­ç›®å½•ï¼š

node\_modules/Â 

â”œâ”€â”¬ AÂ 

â”œâ”€â”¬ BÂ 

â”œâ”€â”¬ CÂ 

ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™æ ·çš„åŒºåˆ«å‘¢ï¼Ÿè¿™å°±è¦ä» npm çš„å·¥ä½œæ–¹å¼è¯´èµ·äº†ï¼š

### npm 2 å’Œ npm 3 æ¨¡å—å®‰è£…æœºåˆ¶çš„å·®å¼‚

è™½ç„¶ç›®å‰æœ€æ–°çš„ npm ç‰ˆæœ¬æ˜¯ npm 6ï¼Œä½† ä» npm 3 å¼€å§‹çš„ç‰ˆæœ¬ä¸­å®ç°äº†ç›®å½•æ‰“å¹³ï¼Œä¸å…¶ä»–ç‰ˆæœ¬ç›¸æ¯”å·®åˆ«è¾ƒå¤§ã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬å…·ä½“çœ‹ä¸‹è¿™ä¸¤ä¸ªç‰ˆæœ¬çš„å·®å¼‚â€‹ã€‚

#### npm2 é€’å½’æ ‘å½¢ä¾èµ–ç»“æ„

npm 2 åœ¨å®‰è£…ä¾èµ–åŒ…æ—¶ï¼Œé‡‡ç”¨ç®€å•çš„é€’å½’å®‰è£…æ–¹æ³•ã€‚æ‰§è¡Œ npm install åï¼Œnpm æ ¹æ® dependencies å’Œ devDependencies å±æ€§ä¸­æŒ‡å®šçš„åŒ…æ¥ç¡®å®šç¬¬ä¸€å±‚ä¾èµ–ï¼Œnpm 2 ä¼šæ ¹æ®ç¬¬ä¸€å±‚ä¾èµ–çš„å­ä¾èµ–ï¼Œé€’å½’å®‰è£…å„ä¸ªåŒ…åˆ°å­ä¾èµ–çš„ node\_modules ä¸­ï¼Œç›´åˆ°å­ä¾èµ–ä¸å†ä¾èµ–å…¶ä»–æ¨¡å—ã€‚æ‰§è¡Œå®Œæ¯•åï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ° ./node\_modules è¿™å±‚ç›®å½•ä¸­åŒ…å«æœ‰æˆ‘ä»¬ package.json æ–‡ä»¶ä¸­æ‰€æœ‰çš„ä¾èµ–åŒ…ï¼Œè€Œè¿™äº›ä¾èµ–åŒ…çš„å­ä¾èµ–åŒ…éƒ½å®‰è£…åœ¨äº†è‡ªå·±çš„ node\_modules ä¸­ ï¼Œå½¢æˆé€’å½’æ ‘å½¢çš„ä¾èµ–æ ‘ç»“æ„ã€‚

![|525](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/76db004671fc4aac83726eb22722e921~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

è¿™æ ·çš„ç›®å½•æœ‰è¾ƒä¸ºæ˜æ˜¾çš„å¥½å¤„ï¼š

â€‹ 1ï¼‰å±‚çº§ç»“æ„éå¸¸æ˜æ˜¾ï¼Œå¯ä»¥æ¸…æ¥šçš„åœ¨ç¬¬ä¸€å±‚çš„ node\_modules ä¸­çœ‹åˆ°æˆ‘ä»¬å®‰è£…çš„æ‰€æœ‰åŒ…çš„å­ç›®å½•ï¼›

â€‹ 2ï¼‰åœ¨å·²çŸ¥è‡ªå·±æ‰€éœ€åŒ…çš„åå­—ä»¥åŠç‰ˆæœ¬å·æ—¶ï¼Œå¯ä»¥å¤åˆ¶ç²˜è´´ç›¸åº”çš„æ–‡ä»¶åˆ° node\_modules ä¸­ï¼Œç„¶åæ‰‹åŠ¨æ›´æ”¹ package.json ä¸­çš„é…ç½®ï¼›

â€‹ 3ï¼‰å¦‚æœæƒ³è¦åˆ é™¤æŸä¸ªåŒ…ï¼Œåªéœ€è¦ç®€å•çš„åˆ é™¤ package.json æ–‡ä»¶ä¸­ç›¸åº”çš„æŸä¸€è¡Œï¼Œç„¶ååˆ é™¤ node\_modules ä¸­è¯¥åŒ…çš„ç›®å½•ï¼›

ä½†æ˜¯è¿™æ ·çš„å±‚çº§ç»“æ„ä¹Ÿæœ‰è¾ƒä¸ºæ˜æ˜¾çš„ç¼ºé™·ï¼Œå½“æˆ‘çš„ Aï¼ŒBï¼ŒC ä¸‰ä¸ªåŒ…ä¸­æœ‰ç›¸åŒçš„ä¾èµ– D æ—¶ï¼Œæ‰§è¡Œ npm install åï¼ŒD ä¼šè¢«é‡å¤ä¸‹è½½ä¸‰æ¬¡ï¼Œè€Œéšç€æˆ‘ä»¬çš„é¡¹ç›®è¶Šæ¥è¶Šå¤æ‚ï¼Œnode\_modules ä¸­çš„ä¾èµ–æ ‘ä¹Ÿä¼šè¶Šæ¥è¶Šå¤æ‚ï¼Œåƒ D è¿™æ ·çš„åŒ…ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šï¼Œé€ æˆäº†å¤§é‡çš„å†—ä½™ï¼›åœ¨ windows ç³»ç»Ÿä¸­ï¼Œç”šè‡³ä¼šå› ä¸ºç›®å½•çš„å±‚çº§å¤ªæ·±å¯¼è‡´æ–‡ä»¶çš„è·¯å¾„è¿‡é•¿ï¼Œè§¦å‘æ–‡ä»¶è·¯å¾„ä¸èƒ½è¶…è¿‡ 280 ä¸ªå­—ç¬¦çš„é”™è¯¯ï¼›

â€‹ ä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œnpm 3 çš„ node\_modules ç›®å½•æ”¹æˆäº†æ›´ä¸ºæ‰å¹³çŠ¶çš„å±‚çº§ç»“æ„ï¼Œå°½é‡æŠŠä¾èµ–ä»¥åŠä¾èµ–çš„ä¾èµ–å¹³é“ºåœ¨ node\_modules æ–‡ä»¶å¤¹ä¸‹å…±äº«ä½¿ç”¨ã€‚

### npm 3 éƒ¨åˆ†æ‹‰å¹³

npm 3 ä¼šéå†æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œé€ä¸ªå°†æ¨¡å—æ”¾åœ¨ node\_modules çš„ç¬¬ä¸€å±‚ï¼Œå½“å‘ç°æœ‰é‡å¤æ¨¡å—æ—¶ï¼Œåˆ™ä¸¢å¼ƒï¼Œ å¦‚æœé‡åˆ°æŸäº›ä¾èµ–ç‰ˆæœ¬ä¸å…¼å®¹çš„é—®é¢˜ï¼Œåˆ™ç»§ç»­é‡‡ç”¨ npm 2 çš„å¤„ç†æ–¹å¼ï¼Œå‰é¢çš„æ”¾åœ¨ node\_modules ç›®å½•ä¸­ï¼Œåé¢çš„æ”¾åœ¨ä¾èµ–æ ‘ä¸­ã€‚ä¸¾ä¸ªä¾‹å­ï¼š Aï¼ŒBï¼Œä¾èµ– D(v 0.0.1)ï¼ŒC ä¾èµ– D(v 0.0.2):

![|525](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3688933d00d7479482c6fc9313502aee~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

ä½†æ˜¯ npm 3 ä¼šå¸¦æ¥ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼šç”±äºåœ¨æ‰§è¡Œ npm install çš„æ—¶å€™ï¼ŒæŒ‰ç…§ package.json é‡Œä¾èµ–çš„é¡ºåºä¾æ¬¡è§£æï¼Œä¸Šå›¾å¦‚æœ C çš„é¡ºåºåœ¨ Aï¼ŒB çš„å‰è¾¹ï¼Œnode\_modules æ ‘åˆ™ä¼šæ”¹å˜ï¼Œä¼šå‡ºç°ä¸‹è¾¹çš„æƒ…å†µï¼š

![|525](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e2996d2ac10b49ef81310c4ca63b98cf~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

ç”±æ­¤å¯è§ï¼Œnpm 3 å¹¶æœªå®Œå…¨è§£å†³å†—ä½™çš„é—®é¢˜ï¼Œç”šè‡³è¿˜ä¼šå¸¦æ¥æ–°çš„é—®é¢˜ã€‚

### ä¸ºä»€ä¹ˆä¼šå‡ºç° package-lock.json å‘¢ï¼Ÿ

#### package.json çš„ä¸è¶³ä¹‹å¤„

npm install æ‰§è¡Œåï¼Œä¼šç”Ÿæˆä¸€ä¸ª node\_modules æ ‘ï¼Œåœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œ å¸Œæœ›å¯¹äºåŒä¸€ä¸ª package.json æ€»æ˜¯ç”Ÿæˆå®Œå…¨ç›¸åŒ node\_modules æ ‘ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç¡®å®å¦‚æ­¤ã€‚ä½†åœ¨å¤šæ•°æƒ…å†µä¸‹ï¼Œnpm æ— æ³•åšåˆ°è¿™ä¸€ç‚¹ã€‚æœ‰ä»¥ä¸‹ä¸¤ä¸ªåŸå› ï¼š

1ï¼‰æŸäº›ä¾èµ–é¡¹è‡ªä¸Šæ¬¡å®‰è£…ä»¥æ¥ï¼Œå¯èƒ½å·²å‘å¸ƒäº†æ–°ç‰ˆæœ¬ ã€‚æ¯”å¦‚ï¼šA åŒ…åœ¨å›¢é˜Ÿä¸­ç¬¬ä¸€ä¸ªäººå®‰è£…çš„æ—¶å€™æ˜¯ 1.0.5 ç‰ˆæœ¬ï¼Œpackage.json ä¸­çš„é…ç½®é¡¹ä¸º A: '^1.0.5' ï¼›å›¢é˜Ÿä¸­ç¬¬äºŒä¸ªäººæŠŠä»£ç æ‹‰ä¸‹æ¥çš„æ—¶å€™ï¼ŒA åŒ…çš„ç‰ˆæœ¬å·²ç»å‡çº§æˆäº† 1.0.8ï¼Œæ ¹æ® package.json ä¸­çš„ semver-range version è§„èŒƒï¼Œæ­¤æ—¶ç¬¬äºŒä¸ªäºº npm install å A çš„ç‰ˆæœ¬ä¸º 1.0.8ï¼› å¯èƒ½ä¼šé€ æˆå› ä¸ºä¾èµ–ç‰ˆæœ¬ä¸åŒè€Œå¯¼è‡´çš„ bugï¼›

2ï¼‰é’ˆå¯¹ 1ï¼‰ä¸­çš„é—®é¢˜ï¼Œå¯èƒ½æœ‰çš„å°ä¼™ä¼´ä¼šæƒ³ï¼ŒæŠŠ A çš„ç‰ˆæœ¬å·å›ºå®šä¸º A: '1.0.5' ä¸å°±å¯ä»¥äº†å—ï¼Ÿä½†æ˜¯è¿™æ ·çš„åšæ³•å…¶å®å¹¶æ²¡æœ‰è§£å†³é—®é¢˜ï¼Œ æ¯”å¦‚ A çš„æŸä¸ªä¾èµ–åœ¨ç¬¬ä¸€ä¸ªäººä¸‹è½½çš„æ—¶å€™æ˜¯ 2.1.3 ç‰ˆæœ¬ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªäººä¸‹è½½çš„æ—¶å€™å·²ç»å‡çº§åˆ°äº† 2.2.5 ç‰ˆæœ¬ï¼Œæ­¤æ—¶ç”Ÿæˆçš„ node\_modules æ ‘ä¾æ—§ä¸å®Œå…¨ç›¸åŒ ï¼Œå›ºå®šç‰ˆæœ¬åªæ˜¯å›ºå®šæ¥è‡ªèº«çš„ç‰ˆæœ¬ï¼Œä¾èµ–çš„ç‰ˆæœ¬æ— æ³•å›ºå®šã€‚

#### é’ˆå¯¹ package.json ä¸è¶³çš„è§£å†³æ–¹æ³•

ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ä»¥åŠ npm 3 çš„é—®é¢˜ï¼Œåœ¨ npm 5.0 ç‰ˆæœ¬åï¼Œnpm install åéƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª package-lock.json æ–‡ä»¶ ï¼Œå½“åŒ…ä¸­æœ‰ package-lock.json æ–‡ä»¶æ—¶ï¼Œnpm install æ‰§è¡Œæ—¶ï¼Œå¦‚æœ package.json å’Œ package-lock.json ä¸­çš„ç‰ˆæœ¬å…¼å®¹ï¼Œä¼šæ ¹æ® package-lock.json ä¸­çš„ç‰ˆæœ¬ä¸‹è½½ï¼›å¦‚æœä¸å…¼å®¹ï¼Œå°†ä¼šæ ¹æ® package.json çš„ç‰ˆæœ¬ï¼Œæ›´æ–° package-lock.json ä¸­çš„ç‰ˆæœ¬ï¼Œå·²ä¿è¯ package-lock.json ä¸­çš„ç‰ˆæœ¬å…¼å®¹ package.jsonã€‚

#### package-lock.json æ–‡ä»¶ç»“æ„

package-lock.json æ–‡ä»¶ä¸­çš„ nameã€version ä¸ package.json ä¸­çš„ nameã€version ä¸€æ ·ï¼Œæè¿°äº†å½“å‰åŒ…çš„åå­—å’Œç‰ˆæœ¬ï¼Œdependencies æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å’Œ node\_modules ä¸­çš„åŒ…ç»“æ„ä¸€ä¸€å¯¹åº”ï¼Œå¯¹è±¡çš„ key ä¸ºåŒ…çš„åç§°ï¼Œå€¼ä¸ºåŒ…çš„ä¸€äº›æè¿°ä¿¡æ¯ï¼Œä¸»è¦çš„ç»“æ„å¦‚ä¸‹ï¼š

* version ï¼šåŒ…ç‰ˆæœ¬ï¼Œå³è¿™ä¸ªåŒ…å½“å‰å®‰è£…åœ¨ node\_modules ä¸­çš„ç‰ˆæœ¬
* resolved ï¼šåŒ…å…·ä½“çš„å®‰è£…æ¥æº
* integrity ï¼šåŒ… hash å€¼ï¼ŒéªŒè¯å·²å®‰è£…çš„è½¯ä»¶åŒ…æ˜¯å¦è¢«æ”¹åŠ¨è¿‡ã€æ˜¯å¦å·²å¤±æ•ˆ
* requires ï¼šå¯¹åº”å­ä¾èµ–çš„ä¾èµ–ï¼Œä¸å­ä¾èµ–çš„ package.json ä¸­ dependencies çš„ä¾èµ–é¡¹ç›¸åŒ
* dependencies ï¼šç»“æ„å’Œå¤–å±‚çš„ dependencies ç»“æ„ç›¸åŒï¼Œå­˜å‚¨å®‰è£…åœ¨å­ä¾èµ– node\_modules ä¸­çš„ä¾èµ–åŒ…

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„å­ä¾èµ–éƒ½æœ‰ dependencies å±æ€§ï¼Œåªæœ‰å­ä¾èµ–çš„ä¾èµ–å’Œå½“å‰å·²å®‰è£…åœ¨æ ¹ç›®å½•çš„ node\_modules ä¸­çš„ä¾èµ–å†²çªä¹‹åï¼Œæ‰ä¼šæœ‰è¿™ä¸ªå±æ€§ã€‚

#### package-lock.json æ–‡ä»¶çš„ä½œç”¨

* åœ¨å›¢é˜Ÿå¼€å‘ä¸­ï¼Œç¡®ä¿æ¯ä¸ªå›¢é˜Ÿæˆå‘˜å®‰è£…çš„ä¾èµ–ç‰ˆæœ¬æ˜¯ä¸€è‡´çš„ï¼Œç¡®å®šä¸€æ£µå”¯ä¸€çš„ node\_modules æ ‘ï¼›
* node\_modules ç›®å½•æœ¬èº«æ˜¯ä¸ä¼šè¢«æäº¤åˆ°ä»£ç åº“çš„ï¼Œä½†æ˜¯ package-lock.json å¯ä»¥æäº¤åˆ°ä»£ç åº“ï¼Œå¦‚æœå¼€å‘äººå‘˜æƒ³è¦å›æº¯åˆ°æŸä¸€å¤©çš„ç›®å½•çŠ¶æ€ï¼Œåªéœ€è¦æŠŠ package.json å’Œ package-lock.json è¿™ä¸¤ä¸ªæ–‡ä»¶å›é€€åˆ°é‚£ä¸€å¤©å³å¯ ã€‚
* ç”±äº package-lock.json å’Œ node\_modules ä¸­çš„ä¾èµ–åµŒå¥—å®Œå…¨ä¸€è‡´ï¼Œå¯ä»¥æ›´åŠ æ¸…æ¥šçš„äº†è§£æ ‘çš„ç»“æ„åŠå…¶å˜åŒ–ã€‚
* åœ¨å®‰è£…æ—¶ï¼Œnpm ä¼šæ¯”è¾ƒ node\_modules å·²æœ‰çš„åŒ…ï¼Œå’Œ package-lock.json è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœé‡å¤çš„è¯ï¼Œå°±è·³è¿‡å®‰è£… ï¼Œä»è€Œä¼˜åŒ–äº†å®‰è£…çš„è¿‡ç¨‹ã€‚

ä¾èµ–çš„åŒºåˆ«ä¸ä½¿ç”¨åœºæ™¯
----------

npm ç›®å‰æ”¯æŒä»¥ä¸‹å‡ ç±»ä¾èµ–åŒ…ç®¡ç†åŒ…æ‹¬

* dependencies
* devDependencies
* optionalDependencies å¯é€‰æ‹©çš„ä¾èµ–åŒ…
* peerDependencies åŒç­‰ä¾èµ–
* bundledDependencies æ†ç»‘ä¾èµ–åŒ…

ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™å‡ ç§ä¾èµ–çš„åŒºåˆ«ä»¥åŠå„è‡ªçš„åº”ç”¨åœºæ™¯ï¼š

### dependencies

dependencies æ˜¯æ— è®ºåœ¨å¼€å‘ç¯å¢ƒè¿˜æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒéƒ½å¿…é¡»ä½¿ç”¨çš„ä¾èµ–ï¼Œæ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„ä¾èµ–åŒ…ç®¡ç†å¯¹è±¡ï¼Œä¾‹å¦‚ Reactï¼ŒLoadshï¼ŒAxios ç­‰ï¼Œé€šè¿‡ npm install XXX ä¸‹è½½çš„åŒ…éƒ½ä¼šé»˜è®¤å®‰è£…åœ¨ dependencies å¯¹è±¡ä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ npm install XXX --save ä¸‹è½½ dependencies ä¸­çš„åŒ…ã€‚

### devDependencies

devDependencies æ˜¯æŒ‡å¯ä»¥åœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨çš„ä¾èµ–ï¼Œä¾‹å¦‚ eslintï¼Œdebug ç­‰ï¼Œé€šè¿‡ npm install packageName --save-dev ä¸‹è½½çš„åŒ…éƒ½ä¼šåœ¨ devDependencies å¯¹è±¡ä¸­ã€‚

dependencies å’Œ devDependencies æœ€å¤§çš„åŒºåˆ«æ˜¯åœ¨æ‰“åŒ…è¿è¡Œæ—¶ï¼Œæ‰§è¡Œ npm install æ—¶é»˜è®¤ä¼šæŠŠæ‰€æœ‰ä¾èµ–å…¨éƒ¨å®‰è£…ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨ npm install --production æ—¶å°±åªä¼šå®‰è£… dependencies ä¸­çš„ä¾èµ–ï¼Œå¦‚æœæ˜¯ node æœåŠ¡é¡¹ç›®ï¼Œå°±å¯ä»¥é‡‡ç”¨è¿™æ ·çš„æ–¹å¼ç”¨äºæœåŠ¡è¿è¡Œæ—¶å®‰è£…å’Œæ‰“åŒ…ï¼Œå‡å°‘åŒ…å¤§å°ã€‚

### optionalDependencies

optionalDependencies æŒ‡çš„æ˜¯å¯ä»¥é€‰æ‹©çš„ä¾èµ–ï¼Œå½“ä½ å¸Œæœ›æŸäº›ä¾èµ–å³ä½¿ä¸‹è½½å¤±è´¥æˆ–è€…æ²¡æœ‰æ‰¾åˆ°æ—¶ï¼Œé¡¹ç›®ä¾ç„¶å¯ä»¥æ­£å¸¸è¿è¡Œæˆ–è€… npm ç»§ç»­è¿è¡Œçš„æ—¶ï¼Œå°±å¯ä»¥æŠŠè¿™äº›ä¾èµ–æ”¾åœ¨ optionalDependencies å¯¹è±¡ä¸­ï¼Œä½†æ˜¯ optionalDependencies ä¼šè¦†ç›– dependencies ä¸­çš„åŒåä¾èµ–åŒ…ï¼Œæ‰€ä»¥ä¸è¦æŠŠä¸€ä¸ªåŒ…åŒæ—¶å†™è¿›ä¸¤ä¸ªå¯¹è±¡ä¸­ã€‚

optionalDependencies å°±åƒæ˜¯æˆ‘ä»¬çš„ä»£ç çš„ä¸€ç§ä¿æŠ¤æœºåˆ¶ä¸€æ ·ï¼Œå¦‚æœåŒ…å­˜åœ¨çš„è¯å°±èµ°å­˜åœ¨çš„é€»è¾‘ï¼Œä¸å­˜åœ¨çš„å°±èµ°ä¸å­˜åœ¨çš„é€»è¾‘ã€‚

### peerDependencies

peerDependencies ç”¨äºæŒ‡å®šä½ å½“å‰çš„æ’ä»¶å…¼å®¹çš„å®¿ä¸»å¿…é¡»è¦å®‰è£…çš„åŒ…çš„ç‰ˆæœ¬ï¼Ÿä¸¾ä¸ªä¾‹å­ğŸŒ°ï¼šæˆ‘ä»¬å¸¸ç”¨çš„ react ç»„ä»¶åº“ [ant-design@3.x](https://link.juejin.cn?target=mailto%3Aant-design%403.x "mailto:ant-design@3.x") çš„ [package.json](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fant-design%2Fant-design%2Fblob%2Fmaster%2Fpackage.json%23L37%20%22https://github.com/ant-design/ant-design/blob/master/package.json#L37%22 "https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fant-design%2Fant-design%2Fblob%2Fmaster%2Fpackage.json%23L37%20%22https://github.com/ant-design/ant-design/blob/master/package.json#L37%22") ä¸­çš„é…ç½®å¦‚ä¸‹ï¼š

```
"peerDependencies": {Â 

Â  "react": ">=16.9.0",Â 

Â  "react-dom": ">=16.9.0"Â 

Â },Â 
```

å‡è®¾æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º project çš„é¡¹ç›®ï¼Œåœ¨æ­¤é¡¹ç›®ä¸­æˆ‘ä»¬è¦ä½¿ç”¨ [ant-design@3.x](https://link.juejin.cn?target=mailto%3Aant-design%403.x "mailto:ant-design@3.x") è¿™ä¸ªæ’ä»¶ï¼Œæ­¤æ—¶æˆ‘ä»¬çš„é¡¹ç›®å°±å¿…é¡»å…ˆå®‰è£… React >= 16.9.0 å’Œ React-dom >= 16.9.0 çš„ç‰ˆæœ¬ã€‚ â€‹

åœ¨ npm 2 ä¸­ï¼Œå½“æˆ‘ä»¬ä¸‹è½½ [ant-design@3.x](https://link.juejin.cn?target=mailto%3Aant-design%403.x "mailto:ant-design@3.x") æ—¶ï¼ŒpeerDependencies ä¸­æŒ‡å®šçš„ä¾èµ–ä¼šéšç€ [ant-design@3.x](https://link.juejin.cn?target=mailto%3Aant-design%403.x "mailto:ant-design@3.x") ä¸€èµ·è¢«å¼ºåˆ¶å®‰è£…ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦åœ¨å®¿ä¸»é¡¹ç›®çš„ package.json æ–‡ä»¶ä¸­æŒ‡å®š peerDependencies ä¸­çš„ä¾èµ–ï¼Œä½†æ˜¯åœ¨ npm 3 ä¸­ï¼Œä¸ä¼šå†å¼ºåˆ¶å®‰è£… peerDependencies ä¸­æ‰€æŒ‡å®šçš„åŒ…ï¼Œè€Œæ˜¯é€šè¿‡è­¦å‘Šçš„æ–¹å¼æ¥æç¤ºæˆ‘ä»¬ï¼Œæ­¤æ—¶å°±éœ€è¦æ‰‹åŠ¨åœ¨ package.json æ–‡ä»¶ä¸­æ‰‹åŠ¨æ·»åŠ ä¾èµ–ï¼›

### bundledDependencies

è¿™ä¸ªä¾èµ–é¡¹ä¹Ÿå¯ä»¥è®°ä¸º bundleDependenciesï¼Œä¸å…¶ä»–å‡ ç§ä¾èµ–é¡¹ä¸åŒï¼Œä»–ä¸æ˜¯ä¸€ä¸ªé”®å€¼å¯¹çš„å¯¹è±¡ï¼Œè€Œæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„é‡Œæ˜¯åŒ…åçš„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼š

```
{Â 

Â  "name": "project",Â 

Â  "version": "1.0.0",Â 

Â  "bundleDependencies": \[Â 

Â  Â  "axios", Â 

Â  Â  "lodash"Â 

Â  \]Â 

}Â 
```

å½“ä½¿ç”¨ npm pack çš„æ–¹å¼æ¥æ‰“åŒ…æ—¶ï¼Œä¸Šè¿°çš„ä¾‹å­ä¼šç”Ÿæˆä¸€ä¸ª project-1.0.0.tgz çš„æ–‡ä»¶ï¼Œåœ¨ä½¿ç”¨äº† bundledDependencies åï¼Œæ‰“åŒ…æ—¶ä¼šæŠŠ Axios å’Œ Lodash è¿™ä¸¤ä¸ªä¾èµ–ä¸€èµ·æ”¾å…¥åŒ…ä¸­ï¼Œä¹‹åæœ‰äººä½¿ç”¨ npm install project-1.0.0.tgz ä¸‹è½½åŒ…æ—¶ï¼ŒAxios å’Œ Lodash è¿™ä¸¤ä¸ªä¾èµ–ä¹Ÿä¼šè¢«å®‰è£…ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å®‰è£…ä¹‹å Axios å’Œ Lodash è¿™ä¸¤ä¸ªåŒ…çš„ä¿¡æ¯åœ¨ dependencies ä¸­ï¼Œå¹¶ä¸”ä¸åŒ…æ‹¬ç‰ˆæœ¬ä¿¡æ¯ã€‚

```
"bundleDependencies": \[Â 

Â  Â  "axios",Â 

Â  Â  "lodash"Â 

Â  \],Â 

Â  "dependencies": {Â 

Â  Â  "axios": "\*",Â 

Â  Â  "lodash": "\*"Â 

Â  },Â 
```

å¦‚æœæˆ‘ä»¬ä½¿ç”¨å¸¸è§„çš„ npm publish æ¥å‘å¸ƒçš„è¯ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ï¼Œæ‰€ä»¥æ—¥å¸¸æƒ…å†µä¸­ä½¿ç”¨çš„è¾ƒå°‘ã€‚

yarn
----

ä¸Šé¢æˆ‘ä»¬è¯´ npm2 çš„ node\_modules æ˜¯åµŒå¥—çš„ã€‚

è¿™æ ·å…¶å®æ˜¯æœ‰é—®é¢˜çš„ï¼Œå¤šä¸ªåŒ…ä¹‹é—´éš¾å…ä¼šæœ‰å…¬å…±çš„ä¾èµ–ï¼Œè¿™æ ·åµŒå¥—çš„è¯ï¼ŒåŒæ ·çš„ä¾èµ–ä¼šå¤åˆ¶å¾ˆå¤šæ¬¡ï¼Œä¼šå æ®æ¯”è¾ƒå¤§çš„ç£ç›˜ç©ºé—´ã€‚

è¿™ä¸ªè¿˜ä¸æ˜¯æœ€å¤§çš„é—®é¢˜ï¼Œè‡´å‘½é—®é¢˜æ˜¯ windows çš„æ–‡ä»¶è·¯å¾„æœ€é•¿æ˜¯ 260 å¤šä¸ªå­—ç¬¦ï¼Œè¿™æ ·åµŒå¥—æ˜¯ä¼šè¶…è¿‡ windows è·¯å¾„çš„é•¿åº¦é™åˆ¶çš„ã€‚

å½“æ—¶ npm è¿˜æ²¡è§£å†³ï¼Œç¤¾åŒºå°±å‡ºæ¥æ–°çš„è§£å†³æ–¹æ¡ˆäº†ï¼Œå°±æ˜¯ yarnï¼š

yarn æ˜¯æ€ä¹ˆè§£å†³ä¾èµ–é‡å¤å¾ˆå¤šæ¬¡ï¼ŒåµŒå¥—è·¯å¾„è¿‡é•¿çš„é—®é¢˜çš„å‘¢ï¼Ÿ

é“ºå¹³ã€‚æ‰€æœ‰çš„ä¾èµ–ä¸å†ä¸€å±‚å±‚åµŒå¥—äº†ï¼Œè€Œæ˜¯å…¨éƒ¨åœ¨åŒä¸€å±‚ï¼Œè¿™æ ·ä¹Ÿå°±æ²¡æœ‰ä¾èµ–é‡å¤å¤šæ¬¡çš„é—®é¢˜äº†ï¼Œä¹Ÿå°±æ²¡æœ‰è·¯å¾„è¿‡é•¿çš„é—®é¢˜äº†ã€‚

æˆ‘ä»¬ç”¨ yarn å®‰è£…ä¸‹ yarn add expressï¼š

è¿™æ—¶å€™ node\_modules å°±æ˜¯è¿™æ ·äº†ï¼š

![|520](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4494cc1e8eec4cbcb2905d8df278b760~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

å…¨éƒ¨é“ºå¹³åœ¨äº†ä¸€å±‚ï¼Œå±•å¼€ä¸‹é¢çš„åŒ…å¤§éƒ¨åˆ†æ˜¯æ²¡æœ‰äºŒå±‚ node\_modules çš„ï¼š

![|525](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0ae666f30987483caf02f882cacd5561~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

å½“ç„¶ä¹Ÿæœ‰çš„åŒ…è¿˜æ˜¯æœ‰ node\_modules çš„ï¼Œæ¯”å¦‚è¿™æ ·ï¼š

![|525](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/26a0b6c970c54f21a6900633b3515f84~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

ä¸ºä»€ä¹ˆè¿˜æœ‰åµŒå¥—å‘¢ï¼Ÿ

å› ä¸ºä¸€ä¸ªåŒ…æ˜¯å¯èƒ½æœ‰å¤šä¸ªç‰ˆæœ¬çš„ï¼Œæå‡åªèƒ½æå‡ä¸€ä¸ªï¼Œæ‰€ä»¥åé¢å†é‡åˆ°ç›¸åŒåŒ…çš„ä¸åŒç‰ˆæœ¬ï¼Œä¾ç„¶è¿˜æ˜¯ç”¨åµŒå¥—çš„æ–¹å¼ã€‚

npm åæ¥å‡çº§åˆ° 3 ä¹‹åï¼Œä¹Ÿæ˜¯é‡‡ç”¨è¿™ç§é“ºå¹³çš„æ–¹æ¡ˆäº†ï¼Œå’Œ yarn å¾ˆç±»ä¼¼ï¼š

![|525](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/275dff97cfe149b7ab0f8e677ad99ac1~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

yarn å’Œ npm éƒ½é‡‡ç”¨äº†é“ºå¹³çš„æ–¹æ¡ˆï¼Œè¿™ç§æ–¹æ¡ˆå°±æ²¡æœ‰é—®é¢˜äº†ä¹ˆï¼Ÿ

npm5+ã€yarn æ‰å¹³åŒ–ç®¡ç†ä¾èµ–é—®é¢˜
-------------------

1. ä¾èµ–ç»“æ„çš„ä¸ç¡®å®šæ€§ã€‚
2. æ‰å¹³åŒ–ç®—æ³•æœ¬èº«çš„å¤æ‚æ€§å¾ˆé«˜ï¼Œè€—æ—¶è¾ƒé•¿ã€‚
3. é¡¹ç›®ä¸­ä»ç„¶å¯ä»¥éæ³•è®¿é—®æ²¡æœ‰å£°æ˜è¿‡ä¾èµ–çš„åŒ…

#### 1.ä¾èµ–ç»“æ„çš„ä¸ç¡®å®šæ€§ã€‚

ç¬¬ä¸€ç‚¹ä¸­çš„ä¸ç¡®å®šæ€§æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿè¿™é‡Œæ¥è¯¦ç»†è§£é‡Šä¸€ä¸‹ã€‚

å‡å¦‚ç°åœ¨é¡¹ç›®ä¾èµ–ä¸¤ä¸ªåŒ… foo å’Œ barï¼Œè¿™ä¸¤ä¸ªåŒ…çš„ä¾èµ–åˆæ˜¯è¿™æ ·çš„:

![|525](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/318b312542c24eca921e3c4243f150c4~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

é‚£ä¹ˆ npm/yarn install çš„æ—¶å€™ï¼Œé€šè¿‡æ‰å¹³åŒ–å¤„ç†ä¹‹åï¼Œç©¶ç«Ÿæ˜¯è¿™æ ·

![|525](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ddd7bb71bfb4470f849f7e984f4d68f5~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

è¿˜æ˜¯è¿™æ ·ï¼Ÿ

![|520](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/516c407e3c654b61a010b563462c811d~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

ç­”æ¡ˆæ˜¯: éƒ½æœ‰å¯èƒ½ã€‚å–å†³äº foo å’Œ bar åœ¨ package.json ä¸­çš„ä½ç½®ï¼Œå¦‚æœ foo å£°æ˜åœ¨å‰é¢ï¼Œé‚£ä¹ˆå°±æ˜¯å‰é¢çš„ç»“æ„ï¼Œå¦åˆ™æ˜¯åé¢çš„ç»“æ„ã€‚

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿä¾èµ–ç»“æ„çš„ä¸ç¡®å®šé—®é¢˜ï¼Œä¹Ÿæ˜¯ lock æ–‡ä»¶è¯ç”Ÿçš„åŸå› ï¼Œæ— è®ºæ˜¯ package-lock.json(npm 5.x æ‰å‡ºç°) è¿˜æ˜¯ yarn.lockï¼Œéƒ½æ˜¯ä¸ºäº†ä¿è¯ install ä¹‹åéƒ½äº§ç”Ÿç¡®å®šçš„ node\_modules ç»“æ„ã€‚

å°½ç®¡å¦‚æ­¤ï¼Œnpm/yarn æœ¬èº«è¿˜æ˜¯å­˜åœ¨æ‰å¹³åŒ–ç®—æ³•å¤æ‚å’Œ package éæ³•è®¿é—®çš„é—®é¢˜ï¼Œå½±å“æ€§èƒ½å’Œå®‰å…¨ã€‚

### 3.é¡¹ç›®ä¸­ä»ç„¶å¯ä»¥éæ³•è®¿é—®æ²¡æœ‰å£°æ˜è¿‡ä¾èµ–çš„åŒ…

ä¹Ÿå°±æ˜¯å¹½çµä¾èµ–ï¼Œä¹Ÿå°±æ˜¯ä½ æ˜æ˜æ²¡æœ‰å£°æ˜åœ¨ dependencies é‡Œçš„ä¾èµ–ï¼Œä½†åœ¨ä»£ç é‡Œå´å¯ä»¥ require è¿›æ¥ã€‚

è¿™ä¸ªä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œå› ä¸ºéƒ½é“ºå¹³äº†å˜›ï¼Œé‚£ä¾èµ–çš„ä¾èµ–ä¹Ÿæ˜¯å¯ä»¥æ‰¾åˆ°çš„ã€‚

ä½†æ˜¯è¿™æ ·æ˜¯æœ‰éšæ‚£çš„ï¼Œå› ä¸ºæ²¡æœ‰æ˜¾å¼ä¾èµ–ï¼Œä¸‡ä¸€æœ‰ä¸€å¤©åˆ«çš„åŒ…ä¸ä¾èµ–è¿™ä¸ªåŒ…äº†ï¼Œé‚£ä½ çš„ä»£ç ä¹Ÿå°±ä¸èƒ½è·‘äº†ï¼Œå› ä¸ºä½ ä¾èµ–è¿™ä¸ªåŒ…ï¼Œä½†æ˜¯ç°åœ¨ä¸ä¼šè¢«å®‰è£…äº†ã€‚

è¿™å°±æ˜¯å¹½çµä¾èµ–çš„é—®é¢˜ã€‚

è€Œä¸”è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä¸Šé¢æåˆ°çš„ä¾èµ–åŒ…æœ‰å¤šä¸ªç‰ˆæœ¬çš„æ—¶å€™ï¼Œåªä¼šæå‡ä¸€ä¸ªï¼Œé‚£å…¶ä½™ç‰ˆæœ¬çš„åŒ…ä¸è¿˜æ˜¯å¤åˆ¶äº†å¾ˆå¤šæ¬¡ä¹ˆï¼Œä¾ç„¶æœ‰æµªè´¹ç£ç›˜ç©ºé—´çš„é—®é¢˜ã€‚

é‚£ç¤¾åŒºæœ‰æ²¡æœ‰è§£å†³è¿™äº›é—®é¢˜çš„æ€è·¯å‘¢ï¼Ÿå½“ç„¶æœ‰ï¼Œè¿™ä¸æ˜¯ pnpm å°±å‡ºæ¥äº†å˜›ã€‚

é‚£ pnpm æ˜¯æ€ä¹ˆè§£å†³é—®é¢˜çš„å‘¢ï¼Ÿ

pnpm
----

å®˜ç½‘ï¼š [pnpm.io/zh/6.x/motiâ€¦](https://link.juejin.cn?target=https%3A%2F%2Fpnpm.io%2Fzh%2F6.x%2Fmotivation "https://pnpm.io/zh/6.x/motivation")

### pnpm ç‰¹æ€§æ¦‚è§ˆ

#### 1\. é€Ÿåº¦å¿«

pnpm å®‰è£…åŒ…çš„é€Ÿåº¦ç©¶ç«Ÿæœ‰å¤šå¿«ï¼Ÿå…ˆä»¥ React åŒ…ä¸ºä¾‹æ¥å¯¹æ¯”ä¸€ä¸‹:

![|515](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1b25a597efb54da9aa250ca6f998f5d0~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

å¯ä»¥çœ‹åˆ°ï¼Œä½œä¸ºé»„è‰²éƒ¨åˆ†çš„ pnpmï¼Œåœ¨ç»å¤šå¤§æ•°åœºæ™¯ä¸‹ï¼ŒåŒ…å®‰è£…çš„é€Ÿåº¦éƒ½æ˜¯æ˜æ˜¾ä¼˜äº npm/yarnï¼Œé€Ÿåº¦ä¼šæ¯” npm/yarn å¿« 2-3 å€ã€‚

#### 2\. é«˜æ•ˆåˆ©ç”¨ç£ç›˜ç©ºé—´

pnpm å†…éƒ¨ä½¿ç”¨åŸºäºå†…å®¹å¯»å€çš„æ–‡ä»¶ç³»ç»Ÿæ¥å­˜å‚¨ç£ç›˜ä¸Šæ‰€æœ‰çš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ç³»ç»Ÿå‡ºè‰²çš„åœ°æ–¹åœ¨äº:

* ä¸ä¼šé‡å¤å®‰è£…åŒä¸€ä¸ªåŒ…ã€‚ç”¨ npm/yarn çš„æ—¶å€™ï¼Œå¦‚æœ 100 ä¸ªé¡¹ç›®éƒ½ä¾èµ– lodashï¼Œé‚£ä¹ˆ lodash å¾ˆå¯èƒ½å°±è¢«å®‰è£…äº† 100 æ¬¡ï¼Œç£ç›˜ä¸­å°±æœ‰ 100 ä¸ªåœ°æ–¹å†™å…¥äº†è¿™éƒ¨åˆ†ä»£ç ã€‚ä½†åœ¨ä½¿ç”¨ pnpm åªä¼šå®‰è£…ä¸€æ¬¡ï¼Œç£ç›˜ä¸­åªæœ‰ä¸€ä¸ªåœ°æ–¹å†™å…¥ï¼Œåé¢å†æ¬¡ä½¿ç”¨éƒ½ä¼šç›´æ¥ä½¿ç”¨ hardlink(ç¡¬é“¾æ¥ï¼Œä¸æ¸…æ¥šçš„åŒå­¦è¯¦è§è¿™ç¯‡æ–‡ç«  ([www.cnblogs.com/itech/archiâ€¦](https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Fitech%2Farchive%2F2009%2F04%2F10%2F1433052.html))%25E3%2580%2582 "https://www.cnblogs.com/itech/archive/2009/04/10/1433052.html))%E3%80%82")
* å³ä½¿ä¸€ä¸ªåŒ…çš„ä¸åŒç‰ˆæœ¬ï¼Œpnpm ä¹Ÿä¼šæå¤§ç¨‹åº¦åœ°å¤ç”¨ä¹‹å‰ç‰ˆæœ¬çš„ä»£ç ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ lodash æœ‰ 100 ä¸ªæ–‡ä»¶ï¼Œæ›´æ–°ç‰ˆæœ¬ä¹‹åå¤šäº†ä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆç£ç›˜å½“ä¸­å¹¶ä¸ä¼šé‡æ–°å†™å…¥ 101 ä¸ªæ–‡ä»¶ï¼Œè€Œæ˜¯ä¿ç•™åŸæ¥çš„ 100 ä¸ªæ–‡ä»¶çš„ hardlinkï¼Œä»…ä»…å†™å…¥é‚£ä¸€ä¸ªæ–°å¢çš„æ–‡ä»¶ã€‚

#### 3\. æ”¯æŒ monorepo

éšç€å‰ç«¯å·¥ç¨‹çš„æ—¥ç›Šå¤æ‚ï¼Œè¶Šæ¥è¶Šå¤šçš„é¡¹ç›®å¼€å§‹ä½¿ç”¨ monorepoã€‚ä¹‹å‰å¯¹äºå¤šä¸ªé¡¹ç›®çš„ç®¡ç†ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨å¤šä¸ª git ä»“åº“ï¼Œä½† monorepo çš„å®—æ—¨å°±æ˜¯ç”¨ä¸€ä¸ª git ä»“åº“æ¥ç®¡ç†å¤šä¸ªå­é¡¹ç›®ï¼Œæ‰€æœ‰çš„å­é¡¹ç›®éƒ½å­˜æ”¾åœ¨æ ¹ç›®å½•çš„ packages ç›®å½•ä¸‹ï¼Œé‚£ä¹ˆä¸€ä¸ªå­é¡¹ç›®å°±ä»£è¡¨ä¸€ä¸ª packageã€‚å¦‚æœä½ ä¹‹å‰æ²¡æ¥è§¦è¿‡ monorepo çš„æ¦‚å¿µï¼Œå»ºè®®ä»”ç»†çœ‹çœ‹è¿™ç¯‡æ–‡ç«  ([www.perforce.com/blog/vcs/whâ€¦](https://link.juejin.cn?target=https%3A%2F%2Fwww.perforce.com%2Fblog%2Fvcs%2Fwhat-monorepo)%25E4%25BB%25A5%25E5%258F%258A%25E5%25BC%2580%25E6%25BA%2590%25E7%259A%2584 "https://www.perforce.com/blog/vcs/what-monorepo)%E4%BB%A5%E5%8F%8A%E5%BC%80%E6%BA%90%E7%9A%84") monorepo ç®¡ç†å·¥å…· lerna([github.com/lerna/lernaâ€¦](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flerna%2Flerna%23readme)%25EF%25BC%258C%25E9%25A1%25B9%25E7%259B%25AE%25E7%259B%25AE%25E5%25BD%2595%25E7%25BB%2593%25E6%259E%2584%25E5%258F%25AF%25E4%25BB%25A5%25E5%258F%2582%25E8%2580%2583%25E4%25B8%2580%25E4%25B8%258B "https://github.com/lerna/lerna#readme)%EF%BC%8C%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E5%8F%AF%E4%BB%A5%E5%8F%82%E8%80%83%E4%B8%80%E4%B8%8B") babel ä»“åº“ ([github.com/babel/babelâ€¦](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbabel%2Fbabel)%25E3%2580%2582 "https://github.com/babel/babel)%E3%80%82")

pnpm ä¸ npm/yarn å¦å¤–ä¸€ä¸ªå¾ˆå¤§çš„ä¸åŒå°±æ˜¯æ”¯æŒäº† monorepoï¼Œä½“ç°åœ¨å„ä¸ªå­å‘½ä»¤çš„åŠŸèƒ½ä¸Šï¼Œæ¯”å¦‚åœ¨æ ¹ç›®å½•ä¸‹ pnpm add A -r, é‚£ä¹ˆæ‰€æœ‰çš„ package ä¸­éƒ½ä¼šè¢«æ·»åŠ  A è¿™ä¸ªä¾èµ–ï¼Œå½“ç„¶ä¹Ÿæ”¯æŒ --filter å­—æ®µæ¥å¯¹ package è¿›è¡Œè¿‡æ»¤ã€‚

#### 4\. å®‰å…¨æ€§é«˜

ä¹‹å‰åœ¨ä½¿ç”¨ npm/yarn çš„æ—¶å€™ï¼Œç”±äº node\_module çš„æ‰å¹³ç»“æ„ï¼Œå¦‚æœ A ä¾èµ– Bï¼Œ B ä¾èµ– Cï¼Œé‚£ä¹ˆ A å½“ä¸­æ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨ C çš„ï¼Œä½†é—®é¢˜æ˜¯ A å½“ä¸­å¹¶æ²¡æœ‰å£°æ˜ C è¿™ä¸ªä¾èµ–ã€‚å› æ­¤ä¼šå‡ºç°è¿™ç§éæ³•è®¿é—®çš„æƒ…å†µã€‚ä½† pnpm è„‘æ´ç‰¹åˆ«å¤§ï¼Œè‡ªåˆ›äº†ä¸€å¥—ä¾èµ–ç®¡ç†æ–¹å¼ï¼Œå¾ˆå¥½åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä¿è¯äº†å®‰å…¨æ€§ï¼Œå…·ä½“æ€ä¹ˆä½“ç°å®‰å…¨ã€è§„é¿éæ³•è®¿é—®ä¾èµ–çš„é£é™©çš„ï¼Œåé¢å†æ¥è¯¦ç»†è¯´è¯´ã€‚

### pnpm ä¾èµ–ç®¡ç†æ–¹å¼

åˆ›å»ºéæ‰å¹³åŒ–çš„ node\_modules æ–‡ä»¶å¤¹ [â€‹](https://link.juejin.cn?target=https%3A%2F%2Fpnpm.io%2Fzh%2F6.x%2Fmotivation%23%25E5%2588%259B%25E5%25BB%25BA%25E9%259D%259E%25E6%2589%2581%25E5%25B9%25B3%25E5%258C%2596%25E7%259A%2584-node_modules-%25E6%2596%2587%25E4%25BB%25B6%25E5%25A4%25B9%2520%2522%25E6%25A0%2587%25E9%25A2%2598%25E7%259B%25B4%25E9%2593%25BE%2522 "https://pnpm.io/zh/6.x/motivation#%E5%88%9B%E5%BB%BA%E9%9D%9E%E6%89%81%E5%B9%B3%E5%8C%96%E7%9A%84-node_modules-%E6%96%87%E4%BB%B6%E5%A4%B9%20%22%E6%A0%87%E9%A2%98%E7%9B%B4%E9%93%BE%22")

![|525](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6ec5de413b2c4e899d3922d2d481c806~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

ä½¿ç”¨ npm æˆ– Yarn å®‰è£…ä¾èµ–é¡¹æ—¶ï¼Œæ‰€æœ‰åŒ…éƒ½è¢«æå‡åˆ°æ¨¡å—ç›®å½•çš„æ ¹ç›®å½•ã€‚ å› æ­¤ï¼Œé¡¹ç›®å¯ä»¥è®¿é—®åˆ°æœªè¢«æ·»åŠ è¿›å½“å‰é¡¹ç›®çš„ä¾èµ–ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œpnpm ä½¿ç”¨è½¯é“¾çš„æ–¹å¼å°†é¡¹ç›®çš„ç›´æ¥ä¾èµ–æ·»åŠ è¿›æ¨¡å—æ–‡ä»¶å¤¹çš„æ ¹ç›®å½•ã€‚

å›æƒ³ä¸‹ npm3 å’Œ yarn ä¸ºä»€ä¹ˆè¦åš node\_modules æ‰å¹³åŒ–ï¼Ÿä¸å°±æ˜¯å› ä¸ºåŒæ ·çš„ä¾èµ–ä¼šå¤åˆ¶å¤šæ¬¡ï¼Œå¹¶ä¸”è·¯å¾„è¿‡é•¿åœ¨ windows ä¸‹æœ‰é—®é¢˜ä¹ˆï¼Ÿ

é‚£å¦‚æœä¸å¤åˆ¶å‘¢ï¼Œæ¯”å¦‚é€šè¿‡ linkã€‚

é¦–å…ˆä»‹ç»ä¸‹ linkï¼Œä¹Ÿå°±æ˜¯è½¯è¿æ¥ï¼Œè¿™æ˜¯æ“ä½œç³»ç»Ÿæä¾›çš„æœºåˆ¶ï¼Œç¡¬è¿æ¥å°±æ˜¯åŒä¸€ä¸ªæ–‡ä»¶çš„ä¸åŒå¼•ç”¨ï¼Œè€Œè½¯é“¾æ¥æ˜¯æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹æŒ‡å‘å¦ä¸€ä¸ªè·¯å¾„ã€‚å½“ç„¶ï¼Œè¿™ä¿©é“¾æ¥ä½¿ç”¨èµ·æ¥æ˜¯å·®ä¸å¤šçš„ã€‚

å¦‚æœä¸å¤åˆ¶æ–‡ä»¶ï¼Œåªåœ¨å…¨å±€ä»“åº“ä¿å­˜ä¸€ä»½ npm åŒ…çš„å†…å®¹ï¼Œå…¶ä½™çš„åœ°æ–¹éƒ½ link è¿‡å»å‘¢ï¼Ÿ

è¿™æ ·ä¸ä¼šæœ‰å¤åˆ¶å¤šæ¬¡çš„ç£ç›˜ç©ºé—´æµªè´¹ï¼Œè€Œä¸”ä¹Ÿä¸ä¼šæœ‰è·¯å¾„è¿‡é•¿çš„é—®é¢˜ã€‚å› ä¸ºè·¯å¾„è¿‡é•¿çš„é™åˆ¶æœ¬è´¨ä¸Šæ˜¯ä¸èƒ½æœ‰å¤ªæ·±çš„ç›®å½•å±‚çº§ï¼Œç°åœ¨éƒ½æ˜¯å„ä¸ªä½ç½®çš„ç›®å½•çš„ linkï¼Œå¹¶ä¸æ˜¯åŒä¸€ä¸ªç›®å½•ï¼Œæ‰€ä»¥ä¹Ÿä¸ä¼šæœ‰é•¿åº¦é™åˆ¶ã€‚

æ²¡é”™ï¼Œpnpm å°±æ˜¯é€šè¿‡è¿™ç§æ€è·¯æ¥å®ç°çš„ã€‚

å†æŠŠ node\_modules åˆ æ‰ï¼Œç„¶åç”¨ pnpm é‡æ–°è£…ä¸€éï¼Œæ‰§è¡Œ pnpm installã€‚

ä½ ä¼šå‘ç°å®ƒæ‰“å°äº†è¿™æ ·ä¸€å¥è¯ï¼š

![|495](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9289c3cca25d475aac7287616c5c090c~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

åŒ…æ˜¯ä»å…¨å±€ store ç¡¬è¿æ¥åˆ°è™šæ‹Ÿ store çš„ï¼Œè¿™é‡Œçš„è™šæ‹Ÿ store å°±æ˜¯ node\_modules/.pnpmã€‚

æˆ‘ä»¬æ‰“å¼€ node\_modules çœ‹ä¸€ä¸‹ï¼š

![|525](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6f4494103d924fb7acc15fa11c264adf~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

ç¡®å®ä¸æ˜¯æ‰å¹³åŒ–çš„äº†ï¼Œä¾èµ–äº† expressï¼Œé‚£ node\_modules ä¸‹å°±åªæœ‰ expressï¼Œæ²¡æœ‰å¹½çµä¾èµ–ã€‚

å±•å¼€ .pnpm çœ‹ä¸€ä¸‹ï¼š

![|525](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/391723546d2f4e8e88d73d41e23210f6~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

æ‰€æœ‰çš„ä¾èµ–éƒ½åœ¨è¿™é‡Œé“ºå¹³äº†ï¼Œéƒ½æ˜¯ä»å…¨å±€ store ç¡¬è¿æ¥è¿‡æ¥çš„ï¼Œç„¶ååŒ…å’ŒåŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»æ˜¯é€šè¿‡è½¯é“¾æ¥ç»„ç»‡çš„ã€‚

æ¯”å¦‚ .pnpm ä¸‹çš„ expresssï¼Œè¿™äº›éƒ½æ˜¯è½¯é“¾æ¥ï¼Œ

![|500](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d1174036b4324f95afe0530cc5fa964c~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰çš„ä¾èµ–éƒ½æ˜¯ä»å…¨å±€ store ç¡¬è¿æ¥åˆ°äº† node\_modules/.pnpm ä¸‹ï¼Œç„¶åä¹‹é—´é€šè¿‡è½¯é“¾æ¥æ¥ç›¸äº’ä¾èµ–ã€‚

è¿™å°±æ˜¯ pnpm çš„å®ç°åŸç†ï¼Œå®ƒæœ€å¤§çš„ä¼˜ç‚¹æ˜¯èŠ‚çœç£ç›˜ç©ºé—´ï¼Œä¸€ä¸ªåŒ…å…¨å±€åªä¿å­˜ä¸€ä»½ï¼Œå‰©ä¸‹çš„éƒ½æ˜¯è½¯ç¡¬è¿æ¥ã€‚

ç¬¬äºŒä¸ªä¼˜ç‚¹å°±æ˜¯å¿«ï¼Œå› ä¸ºé€šè¿‡é“¾æ¥çš„æ–¹å¼è€Œä¸æ˜¯å¤åˆ¶ï¼Œè‡ªç„¶ä¼šå¿«ã€‚

è¿™ä¹Ÿæ˜¯å®ƒæ‰€æ ‡æ¦œçš„ä¼˜ç‚¹ï¼š

* ç›¸æ¯” npm2 çš„ä¼˜ç‚¹å°±æ˜¯ä¸ä¼šè¿›è¡ŒåŒæ ·ä¾èµ–çš„å¤šæ¬¡å¤åˆ¶ã€‚
* ç›¸æ¯” yarn å’Œ npm3+ å‘¢ï¼Œé‚£å°±æ˜¯æ²¡æœ‰å¹½çµä¾èµ–ï¼Œä¹Ÿä¸ä¼šæœ‰æ²¡æœ‰è¢«æå‡çš„ä¾èµ–ä¾ç„¶å¤åˆ¶å¤šä»½çš„é—®é¢˜ã€‚

#### pnpm å®‰è£… express æ¡ˆä¾‹

è¿˜æ˜¯ä»¥å®‰è£… express ä¸ºä¾‹ï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œæ‰§è¡Œ:

pnpmÂ initÂ -y

ç„¶åæ‰§è¡Œ:

pnpmÂ installÂ express

æˆ‘ä»¬å†å»çœ‹çœ‹ node\_modules:

.pnpm

.modules.yaml

express

æˆ‘ä»¬ç›´æ¥å°±çœ‹åˆ°äº† expressï¼Œä½†å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œä»…ä»…åªæ˜¯ä¸€ä¸ªè½¯é“¾æ¥ï¼Œä¸ä¿¡ä½ æ‰“å¼€çœ‹çœ‹ï¼Œé‡Œé¢å¹¶æ²¡æœ‰ node\_modules ç›®å½•ï¼Œå¦‚æœæ˜¯çœŸæ­£çš„æ–‡ä»¶ä½ç½®ï¼Œé‚£ä¹ˆæ ¹æ® node çš„åŒ…åŠ è½½æœºåˆ¶ï¼Œå®ƒæ˜¯æ‰¾ä¸åˆ°ä¾èµ–çš„ã€‚é‚£ä¹ˆå®ƒçœŸæ­£çš„ä½ç½®åœ¨å“ªå‘¢ï¼Ÿ

æˆ‘ä»¬ç»§ç»­åœ¨ .pnpm å½“ä¸­å¯»æ‰¾:

```
â–¾Â node\_modules

Â Â â–¾Â .pnpm

Â Â Â Â â–¸Â [accepts@1.3.7](https://link.juejin.cn?target=mailto%3Aaccepts%401.3.7 "mailto:accepts@1.3.7")

Â Â Â Â â–¸Â [array-flatten@1.1.1](https://link.juejin.cn?target=mailto%3Aarray-flatten%401.1.1 "mailto:array-flatten@1.1.1")

Â Â Â Â ...

Â Â Â Â â–¾Â [express@4.17.1](https://link.juejin.cn?target=mailto%3Aexpress%404.17.1 "mailto:express@4.17.1")

Â Â Â Â Â Â â–¾Â node\_modules

Â Â Â Â Â Â Â Â â–¸Â accepts

Â Â Â Â Â Â Â Â â–¸Â array-flatten

Â Â Â Â Â Â Â Â â–¸Â body-parser

Â Â Â Â Â Â Â Â â–¸Â content-disposition

Â Â Â Â Â Â Â Â ...

Â Â Â Â Â Â Â Â â–¸Â etag

Â Â Â Â Â Â Â Â â–¾Â express

Â Â Â Â Â Â Â Â Â Â â–¸Â lib

Â Â Â Â Â Â Â Â Â Â Â Â History.md

Â Â Â Â Â Â Â Â Â Â Â Â index.js

Â Â Â Â Â Â Â Â Â Â Â Â LICENSE

Â Â Â Â Â Â Â Â Â Â Â Â package.json

Â Â Â Â Â Â Â Â Â Â Â Â Readme.md
```

å¥½å®¶ä¼™ï¼ç«Ÿç„¶åœ¨ .pnpm/express@4.17.1/node\_modules/express ä¸‹é¢æ‰¾åˆ°äº†!

éšä¾¿æ‰“å¼€ä¸€ä¸ªåˆ«çš„åŒ…:

![|520](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/06b042cc52f54965a36695681f68e805~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

å¥½åƒä¹Ÿéƒ½æ˜¯ä¸€æ ·çš„è§„å¾‹ï¼Œéƒ½æ˜¯@version/node\_modules/è¿™ç§ç›®å½•ç»“æ„ã€‚å¹¶ä¸” express çš„ä¾èµ–éƒ½åœ¨.pnpm/express@4.17.1/node\_modules ä¸‹é¢ï¼Œè¿™äº›ä¾èµ–ä¹Ÿå…¨éƒ½æ˜¯è½¯é“¾æ¥ã€‚

å†çœ‹çœ‹.pnpmï¼Œ.pnpm ç›®å½•ä¸‹è™½ç„¶å‘ˆç°çš„æ˜¯æ‰å¹³çš„ç›®å½•ç»“æ„ï¼Œä½†ä»”ç»†æƒ³æƒ³ï¼Œé¡ºç€è½¯é“¾æ¥æ…¢æ…¢å±•å¼€ï¼Œå…¶å®å°±æ˜¯åµŒå¥—çš„ç»“æ„ï¼

```
â–¾Â node\_modules

Â Â â–¾Â .pnpm

Â Â Â Â â–¸Â [accepts@1.3.7](https://link.juejin.cn?target=mailto%3Aaccepts%401.3.7 "mailto:accepts@1.3.7")

Â Â Â Â â–¸Â [array-flatten@1.1.1](https://link.juejin.cn?target=mailto%3Aarray-flatten%401.1.1 "mailto:array-flatten@1.1.1")

Â Â Â Â ...

Â Â Â Â â–¾Â [express@4.17.1](https://link.juejin.cn?target=mailto%3Aexpress%404.17.1 "mailto:express@4.17.1")

Â Â Â Â Â Â â–¾Â node\_modules

Â Â Â Â Â Â Â Â â–¸Â acceptsÂ Â ->Â ../accepts@1.3.7/node\_modules/accepts

Â Â Â Â Â Â Â Â â–¸Â array-flattenÂ ->Â ../array-[flatten@1.1.1](https://link.juejin.cn?target=mailto%3Aflatten%401.1.1 "mailto:flatten@1.1.1")/node\_modules/array-flatten

Â Â Â Â Â Â Â Â ...

Â Â Â Â Â Â Â Â â–¾Â express

Â Â Â Â Â Â Â Â Â Â â–¸Â lib

Â Â Â Â Â Â Â Â Â Â Â Â History.md

Â Â Â Â Â Â Â Â Â Â Â Â index.js

Â Â Â Â Â Â Â Â Â Â Â Â LICENSE

Â Â Â Â Â Â Â Â Â Â Â Â package.json

Â Â Â Â Â Â Â Â Â Â Â Â Readme.md
```

å°†åŒ…æœ¬èº«å’Œä¾èµ–æ”¾åœ¨åŒä¸€ä¸ª node\_module ä¸‹é¢ï¼Œä¸åŸç”Ÿ Node å®Œå…¨å…¼å®¹ï¼Œåˆèƒ½å°† package ä¸ç›¸å…³çš„ä¾èµ–å¾ˆå¥½åœ°ç»„ç»‡åˆ°ä¸€èµ·ï¼Œè®¾è®¡ååˆ†ç²¾å¦™ã€‚

ç°åœ¨æˆ‘ä»¬å›è¿‡å¤´æ¥çœ‹ï¼Œæ ¹ç›®å½•ä¸‹çš„ node\_modules ä¸‹é¢ä¸å†æ˜¯çœ¼èŠ±ç¼­ä¹±çš„ä¾èµ–ï¼Œè€Œæ˜¯è·Ÿ package.json å£°æ˜çš„ä¾èµ–åŸºæœ¬ä¿æŒä¸€è‡´ã€‚å³ä½¿ pnpm å†…éƒ¨ä¼šæœ‰ä¸€äº›åŒ…ä¼šè®¾ç½®ä¾èµ–æå‡ï¼Œä¼šè¢«æå‡åˆ°æ ¹ç›®å½• node\_modules å½“ä¸­ï¼Œä½†æ•´ä½“ä¸Šï¼Œæ ¹ç›®å½•çš„ node\_modules æ¯”ä»¥å‰è¿˜æ˜¯æ¸…æ™°å’Œè§„èŒƒäº†è®¸å¤šã€‚

### è¯¦è§£å®‰å…¨æ€§é«˜

ä¸çŸ¥é“ä½ å‘ç°æ²¡æœ‰ï¼Œpnpm è¿™ç§ä¾èµ–ç®¡ç†çš„æ–¹å¼ä¹Ÿå¾ˆå·§å¦™åœ°è§„é¿äº†éæ³•è®¿é—®ä¾èµ–çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯åªè¦ä¸€ä¸ªåŒ…æœªåœ¨ package.json ä¸­å£°æ˜ä¾èµ–ï¼Œé‚£ä¹ˆåœ¨é¡¹ç›®ä¸­æ˜¯æ— æ³•è®¿é—®çš„ã€‚

ä½†åœ¨ npm/yarn å½“ä¸­æ˜¯åšä¸åˆ°çš„ï¼Œé‚£ä½ å¯èƒ½ä¼šé—®äº†ï¼Œå¦‚æœ A ä¾èµ– Bï¼Œ B ä¾èµ– Cï¼Œé‚£ä¹ˆ A å°±ç®—æ²¡æœ‰å£°æ˜ C çš„ä¾èµ–ï¼Œç”±äºæœ‰ä¾èµ–æå‡çš„å­˜åœ¨ï¼ŒC è¢«è£…åˆ°äº† A çš„ node\_modules é‡Œé¢ï¼Œé‚£æˆ‘åœ¨ A é‡Œé¢ç”¨ Cï¼Œè·‘èµ·æ¥æ²¡æœ‰é—®é¢˜å‘€ï¼Œæˆ‘ä¸Šçº¿äº†ä¹‹åï¼Œä¹Ÿèƒ½æ­£å¸¸è¿è¡Œå•Šã€‚ä¸æ˜¯æŒºå®‰å…¨çš„å—ï¼Ÿ

è¿˜çœŸä¸æ˜¯ã€‚

ç¬¬ä¸€ï¼Œä½ è¦çŸ¥é“ B çš„ç‰ˆæœ¬æ˜¯å¯èƒ½éšæ—¶å˜åŒ–çš„ï¼Œå‡å¦‚ä¹‹å‰ä¾èµ–çš„æ˜¯ [C@1.0.1](https://link.juejin.cn?target=mailto%3AC%401.0.1 "mailto:C@1.0.1")ï¼Œç°åœ¨å‘äº†æ–°ç‰ˆï¼Œæ–°ç‰ˆæœ¬çš„ B ä¾èµ– [C@2.0.1](https://link.juejin.cn?target=mailto%3AC%402.0.1 "mailto:C@2.0.1")ï¼Œé‚£ä¹ˆåœ¨é¡¹ç›® A å½“ä¸­ npm/yarn install ä¹‹åï¼Œè£…ä¸Šçš„æ˜¯ 2.0.1 ç‰ˆæœ¬çš„ Cï¼Œè€Œ A å½“ä¸­ç”¨çš„è¿˜æ˜¯ C å½“ä¸­æ—§ç‰ˆçš„ APIï¼Œå¯èƒ½å°±ç›´æ¥æŠ¥é”™äº†ã€‚

ç¬¬äºŒï¼Œå¦‚æœ B æ›´æ–°ä¹‹åï¼Œå¯èƒ½ä¸éœ€è¦ C äº†ï¼Œé‚£ä¹ˆå®‰è£…ä¾èµ–çš„æ—¶å€™ï¼ŒC éƒ½ä¸ä¼šè£…åˆ° node\_modules é‡Œé¢ï¼ŒA å½“ä¸­å¼•ç”¨ C çš„ä»£ç ç›´æ¥æŠ¥é”™ã€‚

è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œåœ¨ monorepo é¡¹ç›®ä¸­ï¼Œå¦‚æœ A ä¾èµ– Xï¼ŒB ä¾èµ– Xï¼Œè¿˜æœ‰ä¸€ä¸ª Cï¼Œå®ƒä¸ä¾èµ– Xï¼Œä½†å®ƒä»£ç é‡Œé¢ç”¨åˆ°äº† Xã€‚ç”±äºä¾èµ–æå‡çš„å­˜åœ¨ï¼Œnpm/yarn ä¼šæŠŠ X æ”¾åˆ°æ ¹ç›®å½•çš„ node\_modules ä¸­ï¼Œè¿™æ · C åœ¨æœ¬åœ°æ˜¯èƒ½å¤Ÿè·‘èµ·æ¥çš„ï¼Œå› ä¸ºæ ¹æ® node çš„åŒ…åŠ è½½æœºåˆ¶ï¼Œå®ƒèƒ½å¤ŸåŠ è½½åˆ° monorepo é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ node\_modules ä¸­çš„ Xã€‚ä½†è¯•æƒ³ä¸€ä¸‹ï¼Œä¸€æ—¦ C å•ç‹¬å‘åŒ…å‡ºå»ï¼Œç”¨æˆ·å•ç‹¬å®‰è£… Cï¼Œé‚£ä¹ˆå°±æ‰¾ä¸åˆ° X äº†ï¼Œæ‰§è¡Œåˆ°å¼•ç”¨ X çš„ä»£ç æ—¶å°±ç›´æ¥æŠ¥é”™äº†ã€‚

è¿™äº›ï¼Œéƒ½æ˜¯ä¾èµ–æå‡æ½œåœ¨çš„ bugã€‚å¦‚æœæ˜¯è‡ªå·±çš„ä¸šåŠ¡ä»£ç è¿˜å¥½ï¼Œè¯•æƒ³ä¸€ä¸‹å¦‚æœæ˜¯ç»™å¾ˆå¤šå¼€å‘è€…ç”¨çš„å·¥å…·åŒ…ï¼Œé‚£å±å®³å°±éå¸¸ä¸¥é‡äº†ã€‚

npm ä¹Ÿæœ‰æƒ³è¿‡å»è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒæŒ‡å®š `--global-style` å‚æ•°å³å¯ç¦æ­¢å˜é‡æå‡ï¼Œä½†è¿™æ ·åšç›¸å½“äºå›åˆ°äº†å½“å¹´åµŒå¥—ä¾èµ–çš„æ—¶ä»£ï¼Œä¸€å¤œå›åˆ°è§£æ”¾å‰ï¼Œå‰é¢æåˆ°çš„åµŒå¥—ä¾èµ–çš„ç¼ºç‚¹ä»ç„¶æš´éœ²æ— é—ã€‚

npm/yarn æœ¬èº«å»è§£å†³ä¾èµ–æå‡çš„é—®é¢˜è²Œä¼¼å¾ˆéš¾å®Œæˆï¼Œä¸è¿‡ç¤¾åŒºé’ˆå¯¹è¿™ä¸ªé—®é¢˜ä¹Ÿå·²ç»æœ‰ç‰¹å®šçš„è§£å†³æ–¹æ¡ˆ: dependency-checkï¼Œåœ°å€: [github.com/dependency-â€¦](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdependency-check-team%2Fdependency-check "https://github.com/dependency-check-team/dependency-check")

ä½†ä¸å¯å¦è®¤çš„æ˜¯ï¼Œpnpm åšçš„æ›´åŠ å½»åº•ï¼Œç‹¬åˆ›çš„ä¸€å¥—ä¾èµ–ç®¡ç†æ–¹å¼ä¸ä»…è§£å†³äº†ä¾èµ–æå‡çš„å®‰å…¨é—®é¢˜ï¼Œè¿˜å¤§å¤§ä¼˜åŒ–äº†æ—¶é—´å’Œç©ºé—´ä¸Šçš„æ€§èƒ½ã€‚

### pnpm ä¸ node ç‰ˆæœ¬å…¼å®¹è¡¨ [â€‹](https://link.juejin.cn?target=https%3A%2F%2Fpnpm.io%2Fzh%2F6.x%2Finstallation%23%25E5%2585%25BC%25E5%25AE%25B9%25E6%2580%25A7%2520%2522%25E6%25A0%2587%25E9%25A2%2598%25E7%259B%25B4%25E9%2593%25BE%2522 "https://pnpm.io/zh/6.x/installation#%E5%85%BC%E5%AE%B9%E6%80%A7%20%22%E6%A0%87%E9%A2%98%E7%9B%B4%E9%93%BE%22")

ä»¥ä¸‹æ˜¯å„ç‰ˆæœ¬ pnpm ä¸å„ç‰ˆæœ¬ Node.js ä¹‹é—´çš„æ”¯æŒè¡¨æ ¼ã€‚

![|525](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4b80a6ef95aa42e79331ce3001579645~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

### æ—¥å¸¸ä½¿ç”¨å‘½ä»¤

è¯´äº†è¿™ä¹ˆå¤šï¼Œä¼°è®¡ä½ ä¼šè§‰å¾— pnpm æŒºå¤æ‚çš„ï¼Œæ˜¯ä¸æ˜¯ç”¨èµ·æ¥æˆæœ¬å¾ˆé«˜å‘¢ï¼Ÿ

æ°å¥½ç›¸åï¼Œpnpm ä½¿ç”¨èµ·æ¥ååˆ†ç®€å•ï¼Œå¦‚æœä½ ä¹‹å‰æœ‰ npm/yarn çš„ä½¿ç”¨ç»éªŒï¼Œç”šè‡³å¯ä»¥æ— ç¼è¿ç§»åˆ° pnpm ä¸Šæ¥ã€‚ä¸ä¿¡æˆ‘ä»¬æ¥ä¸¾å‡ ä¸ªæ—¥å¸¸ä½¿ç”¨çš„ä¾‹å­ã€‚

#### pnpm install

è·Ÿ npm install ç±»ä¼¼ï¼Œå®‰è£…é¡¹ç›®ä¸‹æ‰€æœ‰çš„ä¾èµ–ã€‚ä½†å¯¹äº monorepo é¡¹ç›®ï¼Œä¼šå®‰è£… workspace ä¸‹é¢æ‰€æœ‰ packages çš„æ‰€æœ‰ä¾èµ–ã€‚ä¸è¿‡å¯ä»¥é€šè¿‡ --filter å‚æ•°æ¥æŒ‡å®š packageï¼Œåªå¯¹æ»¡è¶³æ¡ä»¶çš„ package è¿›è¡Œä¾èµ–å®‰è£…ã€‚

å½“ç„¶ï¼Œä¹Ÿå¯ä»¥è¿™æ ·ä½¿ç”¨ï¼Œæ¥è¿›è¡Œå•ä¸ªåŒ…çš„å®‰è£…:

```arduino
//Â å®‰è£…Â axios

pnpmÂ installÂ axios

//Â å®‰è£…Â axiosÂ å¹¶å°†Â axiosÂ æ·»åŠ è‡³Â devDependencies

pnpmÂ installÂ axiosÂ -D

//Â å®‰è£…Â axiosÂ å¹¶å°†Â axiosÂ æ·»åŠ è‡³Â dependencies

pnpmÂ installÂ axiosÂ -S

```

å½“ç„¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ --filter æ¥æŒ‡å®š packageã€‚

#### pnpm update

æ ¹æ®æŒ‡å®šçš„èŒƒå›´å°†åŒ…æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œmonorepo é¡¹ç›®ä¸­å¯ä»¥é€šè¿‡ --filter æ¥æŒ‡å®š packageã€‚

#### pnpm uninstall

åœ¨ node\_modules å’Œ package.json ä¸­ç§»é™¤æŒ‡å®šçš„ä¾èµ–ã€‚monorepo é¡¹ç›®åŒä¸Šã€‚ä¸¾ä¾‹å¦‚ä¸‹:

```css
//Â ç§»é™¤Â axios

pnpmÂ uninstallÂ axiosÂ --filterÂ package-a

```

#### pnpm link

å°†æœ¬åœ°é¡¹ç›®è¿æ¥åˆ°å¦ä¸€ä¸ªé¡¹ç›®ã€‚æ³¨æ„ï¼Œä½¿ç”¨çš„æ˜¯ç¡¬é“¾æ¥ï¼Œè€Œä¸æ˜¯è½¯é“¾æ¥ã€‚å¦‚:

```
pnpmÂ linkÂ ../../axios
```

å¦å¤–ï¼Œå¯¹äºæˆ‘ä»¬ç»å¸¸ç”¨åˆ° `npm run/start/test/publish`ï¼Œè¿™äº›ç›´æ¥æ¢æˆ pnpm ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä¸å†èµ˜è¿°ã€‚æ›´å¤šçš„ä½¿ç”¨å§¿åŠ¿å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£: [pnpm.js.org/en/](https://link.juejin.cn?target=https%3A%2F%2Fpnpm.js.org%2Fen%2F "https://pnpm.js.org/en/")

å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶ pnpm å†…éƒ¨åšäº†éå¸¸å¤šå¤æ‚çš„è®¾è®¡ï¼Œä½†å®é™…ä¸Šå¯¹äºç”¨æˆ·æ¥è¯´æ˜¯æ— æ„ŸçŸ¥çš„ï¼Œä½¿ç”¨èµ·æ¥éå¸¸å‹å¥½ã€‚å¹¶ä¸”ï¼Œç°åœ¨ä½œè€…ç°åœ¨è¿˜ä¸€ç›´åœ¨ç»´æŠ¤ï¼Œç›®å‰ npm ä¸Šå‘¨ä¸‹è½½é‡å·²ç»æœ‰ 10w +ï¼Œç»å†äº†å¤§è§„æ¨¡ç”¨æˆ·çš„è€ƒéªŒï¼Œç¨³å®šæ€§ä¹Ÿèƒ½æœ‰æ‰€ä¿éšœã€‚

å› æ­¤ï¼Œç»¼åˆæ¥çœ‹ï¼Œpnpm æ˜¯ä¸€ä¸ªç›¸æ¯” npm/yarn æ›´ä¼˜çš„æ–¹æ¡ˆï¼ŒæœŸå¾…æœªæ¥ pnpm èƒ½æœ‰æ›´å¤šçš„è½åœ°ã€‚

### æ€»ç»“

pnpm æœ€è¿‘ç»å¸¸ä¼šå¬åˆ°ï¼Œå¯ä»¥è¯´æ˜¯çˆ†ç«ã€‚æœ¬æ–‡æˆ‘ä»¬æ¢³ç†äº†ä¸‹å®ƒçˆ†ç«çš„åŸå› ï¼š

npm2 æ˜¯é€šè¿‡åµŒå¥—çš„æ–¹å¼ç®¡ç† node\_modules çš„ï¼Œä¼šæœ‰åŒæ ·çš„ä¾èµ–å¤åˆ¶å¤šæ¬¡çš„é—®é¢˜ã€‚

npm3+ å’Œ yarn æ˜¯é€šè¿‡é“ºå¹³çš„æ‰å¹³åŒ–çš„æ–¹å¼æ¥ç®¡ç† node\_modulesï¼Œè§£å†³äº†åµŒå¥—æ–¹å¼çš„éƒ¨åˆ†é—®é¢˜ï¼Œä½†æ˜¯å¼•å…¥äº†å¹½çµä¾èµ–çš„é—®é¢˜ï¼Œå¹¶ä¸”åŒåçš„åŒ…åªä¼šæå‡ä¸€ä¸ªç‰ˆæœ¬çš„ï¼Œå…¶ä½™çš„ç‰ˆæœ¬ä¾ç„¶ä¼šå¤åˆ¶å¤šæ¬¡ã€‚

pnpm åˆ™æ˜¯ç”¨äº†å¦ä¸€ç§æ–¹å¼ï¼Œä¸å†æ˜¯å¤åˆ¶äº†ï¼Œè€Œæ˜¯éƒ½ä»å…¨å±€ store ç¡¬è¿æ¥åˆ° node\_modules/.pnpmï¼Œç„¶åä¹‹é—´é€šè¿‡è½¯é“¾æ¥æ¥ç»„ç»‡ä¾èµ–å…³ç³»ã€‚

è¿™æ ·ä¸ä½†èŠ‚çœç£ç›˜ç©ºé—´ï¼Œä¹Ÿæ²¡æœ‰å¹½çµä¾èµ–é—®é¢˜ï¼Œå®‰è£…é€Ÿåº¦è¿˜å¿«ï¼Œä»æœºåˆ¶ä¸Šæ¥è¯´å®Œèƒœ npm å’Œ yarnã€‚

pnpm å°±æ˜¯å‡­å€Ÿè¿™ä¸ªå¯¹ npm å’Œ yarn é™ç»´æ‰“å‡»çš„ã€‚

### å¦é™„å¸¸è§å®‰è£…é”™è¯¯

#### é—®é¢˜ 1ï¼šè¿è¡Œ pnpm install æŠ¥é”™ ERR\_PNPM\_INVALID\_OVERRIDE\_SELECTOR

```
pnpm: Cannot parse the "//"Â [selector](https://link.juejin.cn?target=https%3A%2F%2Fso.csdn.net%2Fso%2Fsearch%3Fq%3Dselector%26spm%3D1001.2101.3001.7020 "https://so.csdn.net/so/search?q=selector&spm=1001.2101.3001.7020")Â in the overrides\\n at parsePkgSelector
```

è§£å†³æ–¹æ³•ï¼š

package.json ä¸‹çš„ resolutions åˆ é™¤ â€œ//â€æ‰€åœ¨è¡Œï¼Œå¦‚ä¸‹å›¾ï¼š

![|525](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/38d43c5a88184ecfae99f8286725a7a8~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

#### é—®é¢˜ 2ï¼šå‡è®¾æ‚¨åœ¨è¿è¡ŒÂ pnpm install æ—¶é‡åˆ°ä»¥ä¸‹é”™è¯¯ï¼š

```
C:\\src>pnpm install

internal/modules/cjs/loader.js:883

Â  throw err;

Â  ^

Error: Cannot find module 'C:\\Users\\Bence\\AppData\\Roaming\\npm\\pnpm-global\\4\\node\_modules\\pnpm\\bin\\pnpm.js'

â†\[90mÂ  Â  at Function.Module.\_resolveFilename (internal/modules/cjs/loader.js:880:15)â†\[39m

â†\[90mÂ  Â  at Function.Module.\_load (internal/modules/cjs/loader.js:725:27)â†\[39m

â†\[90mÂ  Â  at Function.executeUserEntryPoint \[as runMain\] (internal/modules/run\_main.js:72:12)â†\[39m

â†\[90mÂ  Â  at internal/main/run\_main\_module.js:17:47â†\[39m {

Â  code: â†\[32m'MODULE\_NOT\_FOUND'â†\[39m,

Â  requireStack: \[\]

}
```

é¦–å…ˆï¼Œå°è¯•é€šè¿‡è¿è¡Œï¼šÂ which pnpm æ¥æ‰¾åˆ° pnpm çš„ä½ç½®ã€‚ å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ Windowsï¼Œè¯·åœ¨ Git Bash ä¸­è¿è¡Œæ­¤å‘½ä»¤ã€‚ æ‚¨å°†è·å¾— pnpm å‘½ä»¤çš„ä½ç½®ï¼Œä¾‹å¦‚ï¼š

```
$ which pnpm

/c/Program Files/nodejs/pnpm
```

ç°åœ¨æ‚¨åº”è¯¥å·²ç»çŸ¥é“äº† pnpm CLI çš„æ‰€åœ¨ç›®å½•ã€‚æ‰“å¼€è¯¥ç›®å½•å¹¶åˆ é™¤æ‰€æœ‰ä¸ pnpm ç›¸å…³çš„æ–‡ä»¶ï¼ˆå¦‚ pnpm.cmdã€Â pnpx.cmdã€Â pnpm ç­‰ï¼‰ã€‚ å®Œæˆåï¼Œå†æ¬¡å®‰è£… pnpmã€‚ç°åœ¨ï¼Œå®ƒåº”è¯¥æ­£æŒ‰ç…§é¢„æœŸå·¥ä½œã€‚

å‚è€ƒæ–‡çŒ®
----

package.json å®˜æ–¹æ–‡æ¡£ ([docs.npmjs.com/files/packaâ€¦](https://link.juejin.cn?target=https%3A%2F%2Fdocs.npmjs.com%2Ffiles%2Fpackage.json%23peerdependencies "https://docs.npmjs.com/files/package.json#peerdependencies"))

package-lock-json å®˜æ–¹æ–‡æ¡£ ([docs.npmjs.com/configuringâ€¦](https://link.juejin.cn?target=https%3A%2F%2Fdocs.npmjs.com%2Fconfiguring-npm%2Fpackage-lock-json.html%23requires "https://docs.npmjs.com/configuring-npm/package-lock-json.html#requires"))

npm æ–‡æ¡£æ€»ç»“ ([juejin.im/post/684490â€¦](https://juejin.im/post/6844903582337237006#heading-0 "https://juejin.im/post/6844903582337237006#heading-0"))

npm-pack ([www.npmjs.cn/cli/pack/](https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.cn%2Fcli%2Fpack%2F "https://www.npmjs.cn/cli/pack/"))

npm ä¾èµ–ç®¡ç†ä¸­è¢«å¿½ç•¥çš„é‚£äº›ç»†èŠ‚ ([juejin.cn/post/686432â€¦](https://juejin.cn/post/6864323316912488455 "https://juejin.cn/post/6864323316912488455"))

[pnpm æ˜¯å‡­ä»€ä¹ˆå¯¹ npm å’Œ yarn é™ç»´æ‰“å‡»çš„](https://link.juejin.cn?target=https%3A%2F%2Fsegmentfault.com%2Fa%2F1190000042266656 "https://segmentfault.com/a/1190000042266656")([mp.weixin.qq.com/s/bLthdXlmuâ€¦](https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FbLthdXlmu8wtC3ScAaZ3Kg "https://mp.weixin.qq.com/s/bLthdXlmu8wtC3ScAaZ3Kg"))

å…³äºç°ä»£åŒ…ç®¡ç†å™¨çš„æ·±åº¦æ€è€ƒâ€”â€”ä¸ºä»€ä¹ˆç°åœ¨æˆ‘æ›´æ¨è pnpm è€Œä¸æ˜¯ npm/yarn?([mp.weixin.qq.com/s/aCS4Ku34nâ€¦]( https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FaCS4Ku34nDe3A-WT5hdx7A " https://mp.weixin.qq.com/s/aCS4Ku34nDe3A-WT5hdx7A" ))